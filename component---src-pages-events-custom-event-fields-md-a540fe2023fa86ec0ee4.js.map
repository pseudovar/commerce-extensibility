{"version":3,"file":"component---src-pages-events-custom-event-fields-md-a540fe2023fa86ec0ee4.js","mappings":"uSAMaA,EAAe,CAAC,EAKvBC,GAJgBC,EAIY,cAJJ,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,4EAC5B,eAASC,EAClB,GAHsBD,MAKtB,MAAMI,EAAc,CAClBN,gBAEIO,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAHgC,WACjCC,GAED,EADIP,GAAK,YAER,OAAO,SAACI,GAAS,UAAKD,EAAiBH,EAAK,CAAEO,WAAYA,EAAYC,QAAQ,eAG5E,eACE,GAAM,iCACH,kCACL,kBAAK,ybACL,SAACV,EAAW,CAACW,QAAQ,OAAOC,MAAM,OAAOF,QAAQ,iBACjD,kBAAK,kCAAgC,uBAAYG,WAAW,KAAM,iBAA8B,aAAW,uBAAYA,WAAW,KAAM,yBAAsC,sEAAoE,uBAAYA,WAAW,KAAM,cAA2B,qCAC1S,eACE,GAAM,mCACH,kBAAgB,uBAAYA,WAAW,MAAO,iBAA8B,UACjF,kBAAK,QAAM,uBAAYA,WAAW,KAAM,gBAA6B,wHAAsH,uBAAYA,WAAW,KAAM,eAA4B,2DACpP,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MACN,cACL,eAAIA,WAAW,KACb,MAAS,MACN,aACL,eAAIA,WAAW,KACb,MAAS,MACN,kBAGT,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,MACN,QACL,eAAIA,WAAW,KACb,MAAS,MACN,qCAEP,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,cACjC,eAAIA,WAAW,KACb,MAAS,MACN,OACL,eAAIA,WAAW,KACb,MAAS,MACN,gQAIX,kBAAK,mCAAiC,uBAAYA,WAAW,KAAM,gBAA6B,MAAI,uBAAYA,WAAW,KAAM,YAAyB,UAAQ,uBAAYA,WAAW,KAAM,iBAA8B,mBAAiB,uBAAYA,WAAW,KAAM,mCAAgD,iCAA+B,uBAAYA,WAAW,KAAM,YAAyB,6EAChZ,oBACE,eAAIA,WAAW,MAAO,6BACtB,eAAIA,WAAW,MAAO,8BACtB,eAAIA,WAAW,MAAO,0BAExB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,iyBAeP,kBAAK,wDACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,+OAWP,eACE,GAAM,yBACH,0BACL,kBAAK,uCAAqC,uBAAYA,WAAW,KAAM,+BAA4C,kCAAgC,uBAAYA,WAAW,KAAM,WAAwB,yEACxM,mBAAG,uBAAYA,WAAW,KAAM,oEAChC,kBAAK,iEACL,kBAAK,kCAAgC,uBAAYA,WAAW,KAAM,4BAAyC,oBAAkB,uBAAYA,WAAW,KAAM,gBAA6B,8BAA4B,uBAAYA,WAAW,KAAM,aAA0B,YAC1Q,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,4gBAsBX,CAEAL,EAAWM,gBAAiB,C","sources":["webpack://commerce-extensibility/./src/pages/events/custom-event-fields.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-extensibility/commerce-extensibility/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"add-custom-fields-to-an-event\"\n    }}>{`Add custom fields to an event`}</h1>\n    <p>{`Your custom module might generate data that would be useful to insert into an existing Commerce event. Processors allow you to enrich the data contained in an event before it is transmitted to the eventing service. You can optionally assign a priority to each processor. The priority is important in cases when changes from one processor can affect the logic of another processor, or when processors add a new element with the same key.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`You must configure a module's `}<inlineCode parentName=\"p\">{`io_events.xml`}</inlineCode>{` or root `}<inlineCode parentName=\"p\">{`app/etc/io_events.xml`}</inlineCode>{` file to add custom fields. You cannot declare them in the system `}<inlineCode parentName=\"p\">{`config.php`}</inlineCode>{` file or add them using the CLI.`}</p>\n    <h2 {...{\n      \"id\": \"configure-the-io_eventsxml-file\"\n    }}>{`Configure the `}<inlineCode parentName=\"h2\">{`io_events.xml`}</inlineCode>{` file`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`<processors>`}</inlineCode>{` element defines the processors that inject custom data into the specified event. This element contains one or more `}<inlineCode parentName=\"p\">{`<processor>`}</inlineCode>{` elements, which can contain the following attributes:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Required`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`class`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The fully-qualified class name.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`priority`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`An integer indicating the order in which multiple processors are executed. The system executes unprioritized processors first, in the order listed. All processors with defined priority values are executed in numerical order, from lowest to highest.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The following example adds the `}<inlineCode parentName=\"p\">{`order_status`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`order_id`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`order_details`}</inlineCode>{` fields to the `}<inlineCode parentName=\"p\">{`observer.sales_order_save_after`}</inlineCode>{` event payload. The assigned `}<inlineCode parentName=\"p\">{`priority`}</inlineCode>{` values indicate the processors will be executed in the following order:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`TestProcessorOrderStatus`}</li>\n      <li parentName=\"ol\">{`TestProcessorOrderDetails`}</li>\n      <li parentName=\"ol\">{`TestProcessorOrderId`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module-commerce-events-client/etc/io_events.xsd\">\n    <event name=\"observer.sales_order_save_after\">\n        <fields>\n            <field name=\"entity_id\" />\n            <field name=\"base_currency_code\" />\n            <field name=\"shipping_method\" />\n        </fields>\n        <processors>\n            <processor class=\"Magento\\\\AdobeCommerceEventsClient\\\\Event\\\\TestProcessorOrderStatus\" priority=\"10\"/>\n            <processor class=\"Magento\\\\AdobeCommerceEventsClient\\\\Event\\\\TestProcessorOrderId\" priority=\"30\"/>\n            <processor class=\"Magento\\\\AdobeCommerceEventsClient\\\\Event\\\\TestProcessorOrderDetails\" priority=\"20\"/>\n        </processors>\n    </event>\n</config>\n`}</code></pre>\n    <p>{`The event payload will be similar to the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"value\": {\n       \"entity_id\": \"3\",\n       \"base_currency_code\": \"USD\",\n       \"shipping_method\": \"tablerate_bestway\",\n       \"order_status\": \"1\", \n       \"order_details\": \"test details\",\n       \"order_id\": \"3\"\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"processor-definitions\"\n    }}>{`Processor definitions`}</h2>\n    <p>{`The processor class must implement `}<inlineCode parentName=\"p\">{`EventDataProcessorInterface`}</inlineCode>{`. This interface contains the `}<inlineCode parentName=\"p\">{`process`}</inlineCode>{` method, which accepts the following arguments. It returns an array.`}</p>\n    <p><inlineCode parentName=\"p\">{`public function process(Event $event, array $eventData): array`}</inlineCode></p>\n    <p>{`You must create a separate class for each field to be added.`}</p>\n    <p>{`In the following example, the `}<inlineCode parentName=\"p\">{`TestProcessorOrderStatus`}</inlineCode>{` class adds the `}<inlineCode parentName=\"p\">{`order_status`}</inlineCode>{` field and a value to the `}<inlineCode parentName=\"p\">{`eventData`}</inlineCode>{` array.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndeclare(strict_types=1);\n​\nnamespace Magento\\\\AdobeCommerceEventsClient\\\\Event;\n​\nuse Magento\\\\AdobeCommerceEventsClient\\\\Event\\\\Processor\\\\EventDataProcessorInterface;\n​\nclass TestProcessorOrderStatus implements EventDataProcessorInterface\n{\n    public function process(Event $event, array $eventData): array\n    {\n        $eventData['order_status'] = 1;\n        return $eventData;\n    }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","variant","slots","parentName","isMDXComponent"],"sourceRoot":""}